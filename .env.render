# =============================================================================
# Render环境变量配置模板
# 手势飞机大战后端服务 - 生产环境配置
# =============================================================================

# 📝 使用说明：
# 1. 复制此文件中的环境变量到Render控制台
# 2. 取消注释并填入实际值
# 3. 敏感信息请直接在Render控制台设置，不要提交到代码仓库

# =============================================================================
# 🔐 必需环境变量（需要在Render控制台手动设置）
# =============================================================================

# MongoDB Atlas连接字符串
# 格式：mongodb+srv://username:password@cluster.mongodb.net/gamedb?retryWrites=true&w=majority
# MONGODB_URI=mongodb+srv://your_username:your_password@cluster0.xjmtcqp.mongodb.net/gamedb?retryWrites=true&w=majority

# MongoDB数据库名称
MONGODB_DB_NAME=gamedb

# Upstash Redis配置（用于缓存和会话存储）
# UPSTASH_REDIS_REST_URL=https://your-redis-instance.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your_redis_access_token

# =============================================================================
# 🌐 应用配置
# =============================================================================

# Node.js环境
NODE_ENV=production

# 服务端口（Render自动分配，通常为10000）
PORT=10000

# API速率限制配置
API_RATE_LIMIT=100
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# CORS配置
CORS_ORIGIN=*

# =============================================================================
# 🔧 功能开关
# =============================================================================

# 启用数据分析
ENABLE_ANALYTICS=true

# 启用Redis缓存
ENABLE_CACHE=true

# 调试模式（生产环境建议关闭）
DEBUG_MODE=false

# 启用详细日志
ENABLE_VERBOSE_LOGGING=false

# =============================================================================
# 📊 监控和错误追踪（可选）
# =============================================================================

# Sentry错误监控DSN
# SENTRY_DSN=https://your-sentry-dsn@o123456.ingest.sentry.io/123456

# Sentry环境标识
# SENTRY_ENVIRONMENT=production

# Sentry发布版本
# SENTRY_RELEASE=1.0.0

# =============================================================================
# 🎮 游戏配置
# =============================================================================

# 最大游戏分数限制
MAX_GAME_SCORE=999999

# 排行榜显示数量
RANKING_LIMIT=100

# 设备ID有效期（天）
DEVICE_ID_EXPIRY_DAYS=365

# 游戏记录保留期（天）
GAME_RECORD_RETENTION_DAYS=90

# =============================================================================
# 🔒 安全配置
# =============================================================================

# JWT密钥（如果使用JWT认证）
# JWT_SECRET=your_super_secret_jwt_key_here

# API密钥（如果需要API认证）
# API_SECRET_KEY=your_api_secret_key

# 加密盐值
# ENCRYPTION_SALT=your_encryption_salt

# =============================================================================
# 📈 性能配置
# =============================================================================

# MongoDB连接池配置
MONGODB_MAX_POOL_SIZE=10
MONGODB_SERVER_SELECTION_TIMEOUT=15000
MONGODB_SOCKET_TIMEOUT=45000

# Redis连接配置
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=1000

# HTTP请求超时（毫秒）
HTTP_TIMEOUT=30000

# =============================================================================
# 🌍 地理和时区配置
# =============================================================================

# 默认时区
TZ=UTC

# 默认语言
DEFAULT_LOCALE=zh-CN

# =============================================================================
# 📧 通知配置（可选）
# =============================================================================

# 邮件服务配置（如果需要邮件通知）
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_email_password

# Webhook通知URL（如果需要Webhook通知）
# WEBHOOK_URL=https://your-webhook-endpoint.com/notify

# =============================================================================
# 🔍 调试和开发配置
# =============================================================================

# 启用API文档（生产环境建议关闭）
ENABLE_API_DOCS=false

# 启用健康检查端点
ENABLE_HEALTH_CHECK=true

# 启用指标收集
ENABLE_METRICS=true

# 日志级别（error, warn, info, debug）
LOG_LEVEL=info

# =============================================================================
# 📝 部署信息
# =============================================================================

# 应用版本
APP_VERSION=1.0.0

# 构建时间（自动设置）
# BUILD_TIME=2024-01-15T10:30:00Z

# Git提交哈希（自动设置）
# GIT_COMMIT=abc123def456

# 部署环境标识
DEPLOYMENT_ENV=render

# =============================================================================
# 💡 配置说明
# =============================================================================

# 1. 必需环境变量：
#    - MONGODB_URI: MongoDB Atlas连接字符串
#    - UPSTASH_REDIS_REST_URL: Redis服务URL
#    - UPSTASH_REDIS_REST_TOKEN: Redis访问令牌

# 2. 可选环境变量：
#    - SENTRY_DSN: 错误监控（推荐设置）
#    - JWT_SECRET: 如果使用JWT认证
#    - SMTP配置: 如果需要邮件通知

# 3. 安全注意事项：
#    - 所有密钥和敏感信息请直接在Render控制台设置
#    - 不要将敏感信息提交到代码仓库
#    - 定期轮换密钥和令牌

# 4. 性能优化：
#    - 根据实际负载调整连接池大小
#    - 监控内存和CPU使用情况
#    - 适当设置缓存TTL

# 5. 监控建议：
#    - 设置Sentry错误监控
#    - 配置健康检查
#    - 启用日志收集

# =============================================================================
# 🚀 快速部署检查清单
# =============================================================================

# ✅ 必需步骤：
# □ 设置MONGODB_URI
# □ 设置UPSTASH_REDIS_REST_URL
# □ 设置UPSTASH_REDIS_REST_TOKEN
# □ 验证NODE_ENV=production
# □ 确认PORT=10000

# ✅ 推荐步骤：
# □ 设置SENTRY_DSN（错误监控）
# □ 配置CORS_ORIGIN（安全）
# □ 设置API_RATE_LIMIT（防护）
# □ 启用ENABLE_CACHE（性能）

# ✅ 可选步骤：
# □ 配置邮件通知
# □ 设置Webhook通知
# □ 自定义游戏配置
# □ 调整性能参数